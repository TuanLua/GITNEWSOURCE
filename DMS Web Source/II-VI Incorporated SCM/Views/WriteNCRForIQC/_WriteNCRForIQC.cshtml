@using Microsoft.AspNet.Identity
@model II_VI_Incorporated_SCM.Models.NCR.NCRInIQCViewModel
<div class="row">
    <div class="col-md-12 ms-showdata-iqc" style="display: none">
        <div class="col-sm-6">
            <div class="row">
                <div class="col-md-3 text-right">
                    <h2>Result</h2>
                </div>
                <div class="col-md-9">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">Receiver</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.RECEIVER1, new
               {
                   @id = "REC",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field RECEIVER must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">

                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">PO Number</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.PO_NUM1, new
               {
                   @id = "PO",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field PO_NUM must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">Part Number</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.MI_PART_NO1, new
               {
                   @id = "ITEM",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_required = "The MI_PART_NO field is required.",
                   @data_val_length = "The field MI_PART_NO must be a string with maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">LOT Number</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.LOT1, new
               {
                   @data_val = "true",
                   @data_val_length = "The field LOT must be a string with a maximum length of 30.",
                   @style = "text-align: center",
                   @data_val_length_max = "50",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">REC Quantity</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.REC_QTY1, new
               {
                   @id = "QTY",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field QTY must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">REJ Quantity</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.REJ_QTY1, new
               {
                   @id = "REJ",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field REJ_QTY must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>

            <div class="row top-buffer">
                <label class="col-md-4 control-label">DEFECTIVE QTY</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.defective, new
               {
                   @id = "DEFECT",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field REJ_QTY must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="row top-buffer">
                <div class="col-md-4 text-right">
                    <h2>Unit</h2>
                </div>
                <div class="col-md-8">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">AQL Visual</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.AQL_VISUAL1, new
               {
                   @id = "AQLV",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field AQL_VISUAL must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })

                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">SPL Visual</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.SAMPLING_VISUAL1, new
               {
                   @id = "SPLM",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field SAMPLING_VISUAL must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">AQL MEASURE</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.AQL_MEASURE1, new
               {
                   @id = "AQLM",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field AQL_MEASURE must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">SPL MEASURE</label>
                <div class="col-md-4">
                    @Html.TextBoxFor(m => m.SAMPLING_MESURE1, new
               {
                   @id = "SPLV",
                   @style = "text-align: center",
                   @data_val = "true",
                   @data_val_length = "The field SAMPLING_MESURE must be a string with a maximum length of 30.",
                   @data_val_length_max = "30",
                   @readonly = "readonly",
                   @class = "form-control",
               })
                </div>
                <div class="col-md-4">
                </div>
            </div>
            <div class="row top-buffer">
                <label class="col-md-4 control-label">FIRST_ARTICLE</label>
                <div class="col-md-4">
                    @Html.CheckBoxFor(m => m.FIRST_ARTICLE1, new
               {
                   @class = "form-control",
                   @data_val = "true",
               })
                </div>
            </div>


        </div>
        
    </div>
</div>
<div class="clearfix"></div>
<div id="attach-evidence" class="row top-buffer ms-showdata-iqc" style="display: none;     margin-left: 5px;">
    <br /> <br />
    <div class="form-group">
        <div class="row top-buffer">
            <label class="col-md-4 control-label">VNMaterialTraceability<span style="color: red">*</span>
                                                                        <p><a target="_blank" href="@ViewBag.VNMaterialTraceabilityLink">Link to eCQ “VN Material Traceability”</a></p>
            </label>
            <div class="col-md-4">
                @Html.TextBoxFor(m => m.VNMaterialTraceability, new { @class = "form-control", type = "file", accept = "application/pdf", multiple = "multiple" })
            </div>
            <div class="col-md-4">
                @Html.ValidationMessageFor(m => m.VNMaterialTraceability, null, new { @class = "help-block text-danger" })
            </div>
        </div>
    </div>
    <br />
    <fieldset class="ms-showdata-iqc" style="display: none">
        <legend>Attach Evidence</legend>
        <div class="">
            <table class="table table-striped table-bordered table-hover table-checkable order-column" id="tbEvidenceIQC">
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tbodyEvidenceIQC"></tbody>
            </table>
            <button type="button" class="btn btn-success pull-right" id="btnAddEvidentIQC">Add File</button>
        </div>

    </fieldset>
</div>
<div class="row top-buffer ms-showdata-iqc" style="display: none">
    <div class="col-md-12">
        <h2>Non-Comformity</h2>
    </div>
</div>
<table class="table table-striped table-bordered table-hover table-checkable order-column ms-showdata-iqc" style="display: none" id="tbl-rev">
    <thead>
        <tr>
            <th>ITEM</th>
            <th style="width: 80px">QTY</th>
            <th>DEFECT</th>
            <th>DECRIPTION</th>
            <th>REMARK</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
<input type="hidden" name="QUALITYASSURANCE" />
<input type="hidden" name="AFG" />
<input type="hidden" name="PURCHASING" />
<input type="hidden" name="ENGINEERING" />
<script>
    //jQuery.extend(jQuery.expr[':'], {
    //    focusable: function (el, index, selector) {
    //        return $(el).is('a, button, :input, .ms-pniqc , [tabindex]');
    //    }
    //});
    //$(document).on('keydown', ':focusable', function (e) {
    //    if (e.which == 13) {
    //        var $canfocus = $(':focusable');
    //        var index = $canfocus.index(this) + 1;
    //        if (index >= $canfocus.length) index = 0;
    //        $canfocus.eq(index).focus();
    //    }
    //});

</script>
<script>
    $('#btnAddEvidentIQC').click(function () {
        //ModelEvidence
        let listRow = $('#tbEvidenceIQC tbody tr');
        let rowlength = listRow.length;

        for (let i = 0; i < rowlength; i++) {
            var ListColumns = listRow[i].children;
            ListColumns[0].children[0].name = "ModelEvidence[" + i + "].EvidenceFile";
            ListColumns[1].children[0].name = "ModelEvidence[" + i + "].IsPrint";
        }

        let template = '<tr> <td width="80%"><input onchange="ViewFileEvidence(this)" accept="image/png,image/jpeg,image/bmp,application/pdf,application/PDF" type="file" class="form-control" name="ModelEvidence[' + rowlength + '].EvidenceFile"></td> <td><button onclick="deleteEvedenceRowIQC(this)" type="button" class="btn btn-danger pull-right">Delete</button></td> </tr>';
        $('#tbodyEvidenceIQC').append(template);
    });

    function deleteEvedenceRowIQC(e) {
        $(e).parent().parent().remove();
        let listRow = $('#tbEvidenceIQC tbody tr');
        let rowlength = listRow.length;
        for (let i = 0; i < rowlength; i++) {
            var ListColumns = listRow[i].children;
            ListColumns[0].children[0].name = "ModelEvidence[" + i + "].EvidenceFile";
            ListColumns[1].children[0].name = "ModelEvidence[" + i + "].IsPrint";
        }
    }
</script>
